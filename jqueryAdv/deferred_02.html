<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Deferred 02</title>
<script src="/js/jquery-1.9.0.min.js"></script>
</head>
<body>
	<div id="main">
		<div id="statusbar" style="display:none"></div>
	</div>
<script>
function updateStatus(){
	var $update = $('<ul></ul>')
	, $statusbar = $('#statusbar')
	, html = [];
	for(var i =0, test = 20; i< test; i++){
		html.push('<li>status update</li>');
	}
	html = html.join("\n");
	$update.append(html);
	$statusbar.append($update);
	$statusbar.slideDown(5000, function(){
		console.log("animation is done! On to the next operation");
	});
	
}
function updateStatusV2(){
	return $.Deferred(function(){
		var $update = '<ul></ul>'
		, $statusbar = $('#statusbar')
		, html = [];
		for(var i = 0, test = 20; i < test; i++){
			html.push('<li>status update</li>');
		}
		html = html.join("\n");
		$upate.append(html);
		$statusbar.append($update);
		$statusbar.slideDown(1000, this.resolve);
	}).promise();
}
$(function(){
	updateStatus();
});
</script>
</body>
</html>